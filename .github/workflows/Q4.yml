name: Q4 - Archiver Q4.java

on:
  workflow_dispatch:  
  #push:
    #branches:
      #- main  


jobs:
  archiver-et-pousser:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout du dépôt
      uses: actions/checkout@v4
      with:
        persist-credentials: true

    - name: Créer Q4_archive_date.txt
      run: |
        DATE=$(date '+%d-%m-%Y')
        FILENAME="Q4_archive_$DATE.txt"
        echo "Nom et prénom : Aubin Montagne" > $FILENAME
        echo "" >> $FILENAME
        echo "Contenu de Q4.java :" >> $FILENAME
        cat Q4.java >> $FILENAME

    - name: Configurer Git
      run: |
        git config --global user.name "AubinMontagne"
        git config --global user.email "aubin.montagne@etu.univ-lehavre.fr"

    - name: Ajouter et committer le fichier
      run: |
        git add Q4_archive_*.txt
        git commit -m "Ajout de $FILENAME via workflow" || echo "Pas de changement à committer"

    - name: Pousser les modifications
      run: git push origin HEAD
