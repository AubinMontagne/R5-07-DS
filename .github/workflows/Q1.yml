name: Copier TOTO et pousser Q1_archive

on:
  workflow_dispatch:  
  #push:
    #branches:
      #- main  

jobs:
  copier-et-pousser:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout du dépôt
      uses: actions/checkout@v4
      with:
        persist-credentials: true  # garde le token Git pour le push

    - name: Copier TOTO.txt vers Q1_archive_TOTO.txt
      run: cp TOTO.txt Q1_archive_TOTO.txt

    - name: Configurer Git
      run: |
        git config --global user.name "AubinMontagne"
        git config --global user.email "aubin.montagne@etu.univ-lehavre.fr"

    - name: Ajouter et committer le nouveau fichier
      run: |
        git add Q1_archive_TOTO.txt
        git commit -m "Ajout de Q1_archive_TOTO.txt via workflow" || echo "Pas de changement à committer"

    - name: Pousser les modifications
      run: git push origin HEAD
